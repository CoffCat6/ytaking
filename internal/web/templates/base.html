{{define "base"}}
<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <title>{{.Title}}</title>
  {{if .Description}}<meta name="description" content="{{.Description}}">{{end}}
  {{if .Keywords}}<meta name="keywords" content="{{.Keywords}}">{{end}}
  <meta property="og:title" content="{{.Title}}" />
  {{if .Description}}<meta property="og:description" content="{{.Description}}" />{{end}}
  {{if .SiteURL}}<meta property="og:url" content="{{.SiteURL}}{{if .CurrentPath}}{{.CurrentPath}}{{end}}" />{{end}}
  {{if .CoverImage}}<meta property="og:image" content="{{.CoverImage}}" />{{end}}
  <meta property="og:type" content="{{if .IsPost}}article{{else}}website{{end}}" />
  <script>
    (function() {
      var stored = localStorage.getItem('theme');
      if (stored) {
        document.documentElement.setAttribute('data-theme', stored);
      } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.setAttribute('data-theme', 'dark');
      }
    })();
  </script>

  <link rel="stylesheet" href="/static/css/app.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&family=Literata:opsz,wght@7..72,300;7..72,500;7..72,700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  {{block "head" .}}{{end}}
</head>

<body>
  <div class="page-shell">
    <header class="site-header">
      <a class="brand brand-link" href="{{.SiteURL}}/" title="返回主页">
        <span class="brand-mark">*</span>
        <div>
          <div class="brand-title">{{.Title}}</div>
          <div class="brand-sub">个人博客 - 长期记录</div>
        </div>
      </a>
      <nav class="site-nav">
        <a href="{{.SiteURL}}/posts">文章</a>
        <a href="{{.SiteURL}}/archive">归档</a>
        <a href="#about">关于</a>
        <a href="#subscribe">订阅</a>
        <button class="theme-toggle" id="theme-btn" aria-label="切换主题">
            <span id="theme-icon">◐</span>
        </button>
      </nav>
    </header>

    <main class="main-content">
      {{block "content" .}}
        <p>默认内容：未定义 content 模板</p>
      {{end}}
    </main>

    <footer class="site-footer">
      <div>(c) 2026 {{.Title}} - Build with Go</div>
      <div class="footer-links">
        <a href="{{.SiteURL}}/feed">RSS</a>
        <a href="mailto:{{.Email}}">邮箱</a>
        <a href="https://github.com/">GitHub</a>
      </div>
    </footer>
  </div>
  <script>
    (function() {
      var btn = document.getElementById('theme-btn');
      var root = document.documentElement;
      btn.addEventListener('click', function() {
        var current = root.getAttribute('data-theme');
        var target = current === 'dark' ? 'light' : 'dark';
        root.setAttribute('data-theme', target);
        localStorage.setItem('theme', target);
      });
    })();
  </script>
</body>
</html>
{{end}}
